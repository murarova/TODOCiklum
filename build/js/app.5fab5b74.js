!function(e){function t(t){for(var i,a,s=t[0],l=t[1],d=t[2],u=0,h=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(c&&c(t);h.length;)h.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={0:0},r=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=l;r.push([94,1]),n()}({53:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);n(53),n(54),n(40),n(64),n(66),n(70),n(71),n(45),n(46),n(48),n(78);var i=n(51),o=n.n(i),r=function(e){if(e){return{isActive:"localStorage"in e,get:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e)}},set:function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e)}},remove:function(e){try{localStorage.removeItem(e)}catch(e){console.error("Remove state error: ",e)}}}}}(window);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=t,this.selectedItemId=null,this.filteredItems=[]}var t,n,i;return t=e,(n=[{key:"filterItems",value:function(e){Object.values(e).every((function(e){return""===e}))&&(this.filteredItems=this.items),""!==e.inputValue&&(this.filteredItems=this.filteredItems.filter((function(t){return t.title.toLowerCase().includes(e.inputValue.toLowerCase())}))),""!==e.selectDoneValue&&"all"!==e.selectDoneValue&&(this.filteredItems=this.filteredItems.filter((function(t){return t.done===e.selectDoneValue}))),""!==e.selectPriorityValue&&"all"!==e.selectPriorityValue&&(this.filteredItems=this.filteredItems.filter((function(t){return t.priority===e.selectPriorityValue})))}},{key:"getItemsFromLS",value:function(){this.items=r.get("items")||[],this.filteredItems=this.items}},{key:"findItem",value:function(e){return this.items.find((function(t){return t.id===e}))}},{key:"setSelectedItemId",value:function(e){this.selectedItemId=e}},{key:"getSelectedItemId",value:function(){return this.selectedItemId}},{key:"addItem",value:function(e){var t=e.title,n=e.text,i=e.priority,r=e.done,a={id:o()(),text:n,title:t,priority:i,done:r};return this.items.push(a),a}},{key:"updateItem",value:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.findItem(e),{},t);this.items=this.items.map((function(t){return t.id===e?n:t}))}},{key:"removeItem",value:function(e){this.items=this.items.filter((function(t){return t.id!==e}))}},{key:"updateDoneStatus",value:function(e){var t=this.findItem(e),n="open"===t.done?t.done="done":t.done="open";this.items.forEach((function(t){return t.id===e?n:t}))}}])&&l(t.prototype,n),i&&l(t,i),e}(),c=(n(82),n(84),n(85),n(87),n(89),n(52)),u=n.n(c);function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=p(t).call(this))||"object"!==f(i)&&"function"!=typeof i?y(n):i).formaState={inputValue:"",selectDoneValue:"",selectPriorityValue:""},e.page=document.querySelector(".page"),e.form=document.querySelector(".form"),e.modal=document.querySelector(".modal"),e.editModal=document.querySelector(".modal-edit"),e.notesGrid=document.querySelector(".notes-grid"),e.inputSearch=e.form.querySelector(".input-search"),e.selectDone=e.form.querySelector(".select-done"),e.selectPriority=e.form.querySelector(".select-priority"),e.createModalForm=e.modal.querySelector(".modal-form"),e.editModalForm=e.editModal.querySelector(".modal-form"),e.addNoteBtn=document.querySelector('button[data-action="add-note"]'),e.cancelEditBtn=document.querySelector('button[data-action="edit-cancel"]'),e.cancelCreateBtn=document.querySelector('button[data-action="create-cancel"]'),e.editSuccessBtn=document.querySelector('.modal-edit button[data-action="edit-success"]'),e.page.addEventListener("click",e.toggleDropdown),e.inputSearch.addEventListener("input",u()(e.onInput.bind(y(e)),300)),e.selectDone.addEventListener("change",e.onSelectDoneChange.bind(y(e))),e.selectPriority.addEventListener("change",e.onSelectPriorityChange.bind(y(e))),e.addNoteBtn.addEventListener("click",e.openCreateModal.bind(y(e))),e.createModalForm.addEventListener("submit",e.handleAdd.bind(y(e))),e.cancelCreateBtn.addEventListener("click",e.handleCreateCancel.bind(y(e))),e.editModalForm.addEventListener("submit",e.handleEditSuccess.bind(y(e))),e.cancelEditBtn.addEventListener("click",e.handleEditCancel.bind(y(e))),e.editSuccessBtn.addEventListener("click",e.handleEditSuccess.bind(y(e))),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(i=[{key:"onInput",value:function(e){this.formaState.inputValue=e.target.value,this.emit("filter",this.formaState)}},{key:"onSelectDoneChange",value:function(e){this.formaState.selectDoneValue=e.target.value,this.emit("filter",this.formaState)}},{key:"onSelectPriorityChange",value:function(e){this.formaState.selectPriorityValue=e.target.value,this.emit("filter",this.formaState)}},{key:"handleAdd",value:function(e){e.preventDefault();var t=this.modal.querySelector(".modal-input__title"),n=this.modal.querySelector(".input"),i=this.modal.querySelector(".modal-select");if(""===n.value||""===t.value)alert("Please fill in all the fields");else{var o={title:t.value,text:n.value,priority:i.value,done:"open"};this.emit("add",o),this.createModalForm.reset(),this.closeCreateModal()}}},{key:"handleEditCancel",value:function(){this.emit("edit-cancel")}},{key:"handleCreateCancel",value:function(){this.emit("create-cancel")}},{key:"handleEditSuccess",value:function(e){e.preventDefault();var t=this.editModal.querySelector(".modal-input__title"),n=this.editModal.querySelector(".input"),i=this.editModal.querySelector(".modal-select"),o={title:t.value,text:n.value,priority:i.value};this.emit("edit-success",o),this.editModalForm.reset(),this.closeEditModal()}},{key:"createNote",value:function(e){var t=document.createElement("div");t.dataset.id=e.id,"done"===e.done&&t.classList.add("done"),t.classList.add("item");var n=document.createElement("h2");n.textContent=e.title,n.classList.add("item-title");var i=document.createElement("p");i.textContent=e.text,i.classList.add("text");var o=document.createElement("div");o.classList.add("buttons-wrap");var r=document.createElement("span");r.textContent=e.priority,r.classList.add("priority");var a=document.createElement("div");a.textContent="...",a.dataset.action="toggle-dropdown",a.classList.add("dropdown");var s=document.createElement("div");s.classList.add("dropdown-btn-wrap");var l=document.createElement("button");l.textContent="Done",l.dataset.action="done",l.classList.add("button"),l.classList.add("drop-btn");var d=document.createElement("button");d.textContent="Edit",d.dataset.action="edit",d.classList.add("button"),d.classList.add("drop-btn");var c=document.createElement("button");return c.textContent="Remove",c.dataset.action="remove",c.classList.add("button"),c.classList.add("dropBtn"),o.append(r,a),a.append(s),s.append(l,d,c),t.append(n,i,o),this.appendEventListners(t),t}},{key:"appendEventListners",value:function(e){var t=e.querySelector('[data-action="remove"]'),n=e.querySelector('[data-action="edit"]'),i=e.querySelector('button[data-action="done"]');t.addEventListener("click",this.handleRemove.bind(this)),n.addEventListener("click",this.handleEditStart.bind(this)),i.addEventListener("click",this.handleDoneStatus.bind(this))}},{key:"handleDoneStatus",value:function(e){e.stopPropagation();var t=e.target.closest(".item");this.emit("done",t)}},{key:"toggleDoneStatus",value:function(e){var t=e.querySelector(".dropdown-btn-wrap");e.classList.toggle("done"),t.classList.remove("show-dropdown")}},{key:"toggleDropdown",value:function(e){var t=document.querySelectorAll(".dropdown-btn-wrap");"dropdown"===e.target.className?Array.from(t).forEach((function(t){t.closest(".item").dataset.id===e.target.closest(".item").dataset.id?e.target.firstElementChild.classList.toggle("show-dropdown"):t.classList.remove("show-dropdown")})):Array.from(t).forEach((function(e){return e.classList.contains("show-dropdown")?e.classList.remove("show-dropdown"):e}))}},{key:"handleEditStart",value:function(e){e.stopPropagation();var t=e.target.closest(".item");e.target.closest(".dropdown-btn-wrap").classList.remove("show-dropdown"),this.emit("edit-start",t.dataset.id)}},{key:"handleRemove",value:function(e){var t=e.target.closest(".item");e.target.closest(".dropdown-btn-wrap").classList.remove("show-dropdown"),e.stopPropagation(),this.emit("remove",t.dataset.id)}},{key:"removeNote",value:function(e){var t=this.notesGrid.querySelector('[data-id="'.concat(e,'"]'));this.notesGrid.removeChild(t)}},{key:"openEditModal",value:function(e){this.page.classList.add("show-edit-modal");var t=this.editModal.querySelector(".modal-input__title"),n=this.editModal.querySelector(".input"),i=this.editModal.querySelector(".modal-select");n.value=e.text,t.value=e.title,i.value=e.priority}},{key:"openCreateModal",value:function(){this.inputSearch.value="",this.page.classList.add("show-modal")}},{key:"closeCreateModal",value:function(){this.page.classList.remove("show-modal")}},{key:"closeEditModal",value:function(){this.page.classList.remove("show-edit-modal")}},{key:"updateNote",value:function(e,t){var n=t.title,i=t.text,o=t.priority,r=this.notesGrid.querySelector('.item[data-id="'.concat(e,'"] .text')),a=this.notesGrid.querySelector('.item[data-id="'.concat(e,'"] .item-title')),s=this.notesGrid.querySelector('.item[data-id="'.concat(e,'"] .priority'));r.textContent=i,a.textContent=n,s.textContent=o}},{key:"init",value:function(e){var t,n=this;this.notesGrid.innerHTML="";var i=e.map((function(e){return n.createNote(e)}));(t=this.notesGrid).append.apply(t,m(i))}},{key:"nothingFound",value:function(){this.notesGrid.innerHTML="";var e=document.createElement("h2");e.classList.add("nothing-found"),e.textContent="Nothing found",this.notesGrid.append(e)}}])&&v(n.prototype,i),o&&v(n,o),t}(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={}}var t,n,i;return t=e,(n=[{key:"on",value:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e]&&this.events[e].forEach((function(e){return e.apply(void 0,n)}))}}])&&h(t.prototype,n),i&&h(t,i),e}());function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var S=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.view=n,this.model.getItemsFromLS(),this.view.init(this.model.items),this.view.on("add",this.addNote.bind(this)),this.view.on("done",this.handleDone.bind(this)),this.view.on("remove",this.removeNote.bind(this)),this.view.on("filter",this.handleFilter.bind(this)),this.view.on("search-empty",this.showAllNotes.bind(this)),this.view.on("edit-start",this.handleEditStart.bind(this)),this.view.on("edit-cancel",this.handleEditCancel.bind(this)),this.view.on("create-cancel",this.handleCreateCancel.bind(this)),this.view.on("edit-success",this.handleEditSuccess.bind(this))}var t,n,i;return t=e,(n=[{key:"handleFilter",value:function(e){this.model.filterItems(e),this.model.filteredItems.length>0?this.view.init(this.model.filteredItems):this.view.nothingFound(),this.model.filteredItems=this.model.items}},{key:"showAllNotes",value:function(){this.view.init(this.model.items)}},{key:"handleDone",value:function(e){this.model.updateDoneStatus(e.dataset.id),r.set("items",this.model.items),this.view.toggleDoneStatus(e)}},{key:"handleEditSuccess",value:function(e){var t=this.model.getSelectedItemId();this.model.updateItem(t,e),r.set("items",this.model.items),this.view.updateNote(t,e)}},{key:"handleEditStart",value:function(e){var t=this.model.findItem(e);this.model.setSelectedItemId(e),this.view.openEditModal(t)}},{key:"handleEditCancel",value:function(){this.view.closeEditModal()}},{key:"handleCreateCancel",value:function(){this.view.closeCreateModal()}},{key:"addNote",value:function(e){this.model.addItem(e),r.set("items",this.model.items),this.showAllNotes()}},{key:"removeNote",value:function(e){this.model.removeItem(e),r.set("items",this.model.items),this.view.removeNote(e)}}])&&g(t.prototype,n),i&&g(t,i),e}(),E=new w;new S(new d,E)}});
//# sourceMappingURL=app.5fab5b74.js.map